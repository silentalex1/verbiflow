<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prysmis AI</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uglify-js@3.17.4/dist/uglify.min.js"></script>

    <style>

        :root {
            --primary-gradient: linear-gradient(135deg, #e6ecff 0%, #c9d9ff 100%);
            --dark-gradient: linear-gradient(135deg, #0f1a33 0%, #050b1a 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: var(--primary-gradient);
            color: #1a2740;
            line-height: 1.6;
            overflow: hidden;
        }

        
        .chat-container {
            display: grid;
            grid-template-rows: auto 1fr auto;
            height: 100vh;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        
        @keyframes smoothAppear {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="preloader" id="preloader">
        <div class="loading-spinner"></div>
    </div>

    <div class="container">
        
        <aside class="sidebar" id="sidebar">
            <div class="toolbar">
                <button data-action="clear-chat" class="glass-effect">
                    <i class="fas fa-trash"></i> Clear History
                </button>
                <input type="file" id="mediaUpload" hidden accept="image/*,video/*">
            </div>
        </aside>

        
        <main class="chat-container">
            <div class="message-view" id="chatArea"></div>
            <div class="input-container">
                <input type="text" id="userInput" placeholder="Ask about your assignment...">
                <button onclick="processInput()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </main>
    </div>

<script>

const commentRemovalConfig={
    output:{comments:false},
    compress:{unused:false,dead_code:false},
    mangle:false
};

function removeComments(code){
    try{
        return UglifyJS.minify(code,commentRemovalConfig).code;
    }catch(e){
        console.error("Optimization error:",e);
        return code;
    }
}

async function processMedia(file){
    const reader=new FileReader();
    return new Promise(r=>{
        reader.onload=e=>{
            const processed=removeComments(e.target.result);
            r(processed);
        };
        reader.readAsText(file);
    });
}

document.getElementById('mediaUpload').addEventListener('change',async e=>{
    const[file]=e.target.files;
    const cleanedCode=await processMedia(file);
    displayProcessedContent(cleanedCode);
});

// Optimized AI Integration
let aiConfig={
    model:"gpt-4-turbo",
    temperature:0.7,
    maxTokens:2048
};

async function queryAI(prompt){
    const response=await fetch('https://api.openai.com/v1/chat/completions',{
        method:'POST',
        headers:{
            'Content-Type':'application/json',
            'Authorization':`Bearer ${localStorage.getItem('openAIKey')}`
        },
        body:JSON.stringify({
            model:aiConfig.model,
            messages:[{role:"user",content:prompt}]
        })
    });
    return response.json();
}
</script>
</body>
</html>
